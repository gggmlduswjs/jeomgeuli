# 화면정의서

**버전**: 1.0.0  
**작성일**: 2024년  
**프로젝트**: 점글이 (Jeomgeuli)

---

## 목차

1. [개요](#1-개요)
2. [공통 컴포넌트](#2-공통-컴포넌트)
3. [페이지별 화면 정의](#3-페이지별-화면-정의)
4. [음성 안내 메시지](#4-음성-안내-메시지)
5. [접근성 요소](#5-접근성-요소)
6. [점자 출력 위치](#6-점자-출력-위치)

---

## 1. 개요

점글이 프로젝트의 화면 정의서입니다. 모든 화면은 시각장애인을 위한 접근성을 최우선으로 설계되었습니다.

### 디자인 원칙

1. **음성 우선**: 모든 기능은 음성 명령으로 제어 가능
2. **큰 터치 영역**: 최소 44px × 44px
3. **고대비**: WCAG 2.1 AA 수준의 색상 대비
4. **명확한 피드백**: 모든 상호작용에 TTS 피드백
5. **키보드 네비게이션**: Tab/Enter 키로 모든 기능 접근 가능

---

## 2. 공통 컴포넌트

### 2.1 AppShellMobile

**파일**: `frontend/src/components/ui/AppShellMobile.tsx`

**기능**
- 모바일 최적화 레이아웃
- 뒤로가기 버튼
- 제목 표시
- 접근성 지원

**Props**
```typescript
{
  title: string;
  showBackButton?: boolean;
  onBack?: () => void;
  className?: string;
}
```

### 2.2 SpeechBar

**파일**: `frontend/src/components/input/SpeechBar.tsx`

**기능**
- 음성 인식 상태 표시
- 인식된 텍스트 표시
- 마이크 아이콘 애니메이션

**표시 내용**
- `isListening`: 마이크 아이콘 펄스 애니메이션
- `transcript`: 인식된 텍스트 (실시간)

### 2.3 ToastA11y

**파일**: `frontend/src/components/system/ToastA11y.tsx`

**기능**
- 접근성 토스트 알림
- TTS 자동 읽기
- 자동 사라짐

**Props**
```typescript
{
  message: string;
  isVisible: boolean;
  duration?: number;  // 기본값: 3000ms
  position?: 'top' | 'bottom';
  onClose?: () => void;
}
```

---

## 3. 페이지별 화면 정의

### 3.1 홈 화면 (Home)

**파일**: `frontend/src/pages/Home.tsx`  
**경로**: `/`

**레이아웃**

```
┌─────────────────────────────┐
│  [←] 점글이          [🔌 연결] │
├─────────────────────────────┤
│  [음성 인식 표시줄]          │
├─────────────────────────────┤
│                             │
│      ┌─────────┐            │
│      │   ⠿     │            │
│      │  점글이  │            │
│      └─────────┘            │
│                             │
│    [학습]                   │
│         [탐색]              │
│    [복습]                   │
│         [변환]              │
│                             │
├─────────────────────────────┤
│  중앙 로고를 길게 눌러       │
│  음성 명령을 사용하세요      │
│  🔊 앱 소개 듣기            │
└─────────────────────────────┘
```

**주요 요소**

1. **디바이스 연결 버튼**
   - 위치: 우측 상단
   - 텍스트: "🔌 디바이스 연결" / "✓ 연결됨"
   - 기능: Web Serial API 연결

2. **음성 인식 표시줄**
   - SpeechBar 컴포넌트
   - 마이크 상태 표시

3. **원형 메뉴**
   - 중앙: 로고 버튼 (길게 눌러 음성 인식)
   - 상단: 학습
   - 우측: 탐색
   - 하단: 복습
   - 좌측: 변환

4. **안내 메시지**
   - "중앙 로고를 길게 눌러 음성 명령을 사용하세요"
   - "🔊 앱 소개 듣기" 버튼

**음성 명령**
- "학습" → `/learn`
- "탐색" → `/explore`
- "복습" → `/review`
- "자유변환" → `/free-convert`

**페이지 진입 안내**
```
"시각장애인 학습 앱, 점글이입니다. 메인화면에 점자학습, 정보탐색, 복습하기, 자유변환 모드가 있습니다. 모드를 선택해주세요."
```

---

### 3.2 학습 메뉴 (LearnIndex)

**파일**: `frontend/src/pages/LearnIndex.tsx`  
**경로**: `/learn`

**레이아웃**

```
┌─────────────────────────────┐
│  [←] 점자 학습               │
├─────────────────────────────┤
│  [음성 인식 표시줄]          │
├─────────────────────────────┤
│                             │
│  점자 학습                   │
│                             │
│  ┌─────────────────────┐   │
│  │ 자모 학습            │   │
│  │ 한글 자음/모음의     │   │
│  │ 점자 패턴            │   │
│  │ 💬 "자모"라고 말하세요│   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ 단어 학습            │   │
│  │ 자모 조합으로 단어   │   │
│  │ 학습                │   │
│  │ 💬 "단어"라고 말하세요│   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ 문장 학습            │   │
│  │ 문장 단위 점자 연습   │   │
│  │ 💬 "문장"라고 말하세요│   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ 자유 변환            │   │
│  │ 임의 텍스트 점자 변환 │   │
│  │ 💬 "자유변환"이라고   │   │
│  │     말하세요         │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ 복습하기 ⭐          │   │
│  │ 틀린 문제/키워드 복습│   │
│  │ 💬 "복습"이라고 말하세요│   │
│  └─────────────────────┘   │
│                             │
└─────────────────────────────┘
```

**주요 요소**

1. **뒤로가기 버튼**
   - 위치: 좌측 상단
   - 기능: 홈으로 이동

2. **학습 항목 카드**
   - 각 항목은 카드 형태
   - 제목, 설명, 음성 명령 안내 포함
   - 터치 이벤트 차단 (음성으로만 제어)

**음성 명령**
- "자모" → `/learn/char`
- "단어" → `/learn/word`
- "문장" → `/learn/sentence`
- "자유변환" → `/learn/free`
- "복습" → `/review`

**페이지 진입 안내**
```
"점자 학습 메뉴입니다. 자모, 단어, 문장, 자유 변환 중에서 선택하세요."
```

---

### 3.3 학습 단계 (LearnStep)

**파일**: `frontend/src/pages/LearnStep.tsx`  
**경로**: `/learn/char`, `/learn/word`, `/learn/sentence`

**레이아웃**

```
┌─────────────────────────────┐
│  [←] 자모 학습      [🔌 연결] │
├─────────────────────────────┤
│  [음성 인식 표시줄]          │
├─────────────────────────────┤
│                             │
│  [점자 패턴 시각화]          │
│  ⠿ ⠿ ⠿                     │
│                             │
│  자모: ㄱ                    │
│  이름: 기역                  │
│                             │
│  [이전] [다음] [반복]        │
│                             │
│  진행: 1/19                  │
│                             │
└─────────────────────────────┘
```

**주요 요소**

1. **점자 패턴 시각화**
   - 2×3 그리드로 점자 표시
   - 켜진 점: 파란색 원
   - 꺼진 점: 회색 원

2. **학습 정보**
   - 자모/단어/문장 표시
   - 이름/발음 표시

3. **제어 버튼**
   - 이전: 이전 항목
   - 다음: 다음 항목
   - 반복: 현재 항목 TTS 재생

4. **진행 상태**
   - 현재 항목 번호 / 전체 항목 수

**음성 명령**
- "다음" → 다음 항목
- "이전" → 이전 항목
- "반복" → TTS 재생
- "홈" → 홈으로 이동

---

### 3.4 정보 탐색 (Explore)

**파일**: `frontend/src/pages/Explore.tsx`  
**경로**: `/explore`

**레이아웃**

```
┌─────────────────────────────┐
│  [←] 정보 탐색      [🔊] [🔌] │
├─────────────────────────────┤
│  [점자 출력 패널]            │
│  현재 출력: 키워드1          │
├─────────────────────────────┤
│  [🔌 연결] [점자출력] [뉴스] │
│  [▶] [⟳] [⏸]               │
├─────────────────────────────┤
│                             │
│  ┌─────────────────────┐   │
│  │ 사용자: 오늘 뉴스    │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ AI: 오늘 뉴스 요약   │   │
│  │ • 첫 번째 뉴스       │   │
│  │ • 두 번째 뉴스       │   │
│  │                     │   │
│  │ [점자 출력] [복습하기]│   │
│  └─────────────────────┘   │
│                             │
├─────────────────────────────┤
│  [입력란] [전송]            │
├─────────────────────────────┤
│  [홈] [학습] [탐색] [복습] [자유]│
└─────────────────────────────┘
```

**주요 요소**

1. **상단 점자 출력 패널**
   - 현재 출력 중인 키워드 표시
   - Sticky 위치

2. **컨트롤 바**
   - Arduino 연결 버튼
   - 점자 출력 토글
   - 빠른 액션 버튼 (뉴스, 다음, 반복, 정지)

3. **채팅 메시지**
   - 사용자 메시지: 파란색 배경
   - AI 답변: 카드 형태
   - 키워드 표시
   - 점자 출력/복습하기 버튼

4. **하단 입력란**
   - 텍스트 입력
   - 음성 입력 지원
   - 전송 버튼

5. **하단 네비게이션 바**
   - 홈, 학습, 탐색, 복습, 자유 변환

**음성 명령**
- "탐색", "검색" → 자동 검색
- "점자 출력" → 키워드 점자 출력
- "복습하기" → 키워드 복습 목록 저장
- "뉴스" → 오늘 뉴스 조회
- "날씨" → 날씨 정보 조회

**페이지 진입 안내**
```
"정보 탐색 모드입니다. 궁금한 것을 물어보세요. 뉴스나 날씨 정보도 확인할 수 있습니다."
```

---

### 3.5 퀴즈 (Quiz)

**파일**: `frontend/src/pages/Quiz.tsx`  
**경로**: `/quiz`, `/learn/quiz`

**레이아웃**

```
┌─────────────────────────────┐
│  [←] 퀴즈          [🔌 연결] │
├─────────────────────────────┤
│  [음성 인식 표시줄]          │
├─────────────────────────────┤
│                             │
│  문제 1/10                   │
│                             │
│  [점자 패턴]                 │
│  ⠿ ⠿ ⠿                     │
│                             │
│  이 점자는 무엇인가요?        │
│                             │
│  [입력란]                    │
│                             │
│  [확인]                      │
│                             │
│  정답: 기역                  │
│  ✅ 정답입니다!              │
│                             │
│  [다음 문제]                 │
│                             │
│  점수: 8/10                  │
│                             │
└─────────────────────────────┘
```

**주요 요소**

1. **문제 표시**
   - 점자 패턴 시각화
   - 문제 번호

2. **답변 입력**
   - 텍스트 입력란
   - 음성 입력 지원

3. **결과 표시**
   - 정답/오답 표시
   - 정답 내용
   - 다음 문제 버튼

4. **점수 표시**
   - 현재 점수 / 전체 문제 수

**음성 명령**
- "다음" → 다음 문제
- "반복" → 문제 TTS 재생

---

### 3.6 복습 (Review)

**파일**: `frontend/src/pages/Review.tsx`  
**경로**: `/review`

**레이아웃**

```
┌─────────────────────────────┐
│  [←] 복습          [🔌 연결] │
├─────────────────────────────┤
│  [음성 인식 표시줄]          │
├─────────────────────────────┤
│                             │
│  복습 항목 1/5                │
│                             │
│  [점자 패턴]                 │
│  ⠿ ⠿ ⠿                     │
│                             │
│  이 점자는 무엇인가요?        │
│                             │
│  [입력란]                    │
│                             │
│  [확인]                      │
│                             │
│  정답: 가나                  │
│  ✅ 정답입니다!              │
│                             │
│  [다음]                      │
│                             │
│  완료: 3/5                   │
│                             │
└─────────────────────────────┘
```

**주요 요소**

1. **복습 항목 표시**
   - SRS 기반 복습 항목
   - 점자 패턴 시각화

2. **답변 입력**
   - 텍스트/음성 입력

3. **결과 표시**
   - 정답/오답
   - 다음 복습 시간 계산

**음성 명령**
- "다음" → 다음 항목
- "반복" → 문제 TTS 재생

**페이지 진입 안내**
```
"복습 모드입니다. 이전에 틀린 문제들을 다시 복습해보세요."
```

---

### 3.7 자유 변환 (FreeConvert)

**파일**: `frontend/src/pages/FreeConvert.tsx`  
**경로**: `/free-convert`, `/learn/free`

**레이아웃**

```
┌─────────────────────────────┐
│  [←] 자유 변환      [🔌 연결] │
├─────────────────────────────┤
│  [음성 인식 표시줄]          │
├─────────────────────────────┤
│                             │
│  입력:                      │
│  ┌─────────────────────┐   │
│  │ 가나다라마바사       │   │
│  └─────────────────────┘   │
│                             │
│  [변환]                     │
│                             │
│  점자 패턴:                 │
│  ⠿ ⠿ ⠿ ⠿ ⠿ ⠿ ⠿ ⠿ ⠿ ⠿ ⠿ ⠿ │
│                             │
│  [복습하기]                 │
│                             │
└─────────────────────────────┘
```

**주요 요소**

1. **입력란**
   - 텍스트 입력
   - 음성 입력 지원

2. **변환 버튼**
   - 점자 변환 실행

3. **점자 패턴 표시**
   - 변환된 점자 시각화

4. **복습하기 버튼**
   - 복습 목록에 추가

**음성 명령**
- "변환" → 점자 변환 실행
- "복습하기" → 복습 목록에 추가

---

## 4. 음성 안내 메시지

### 4.1 페이지 진입 안내

각 페이지 진입 시 자동으로 TTS 안내 메시지가 재생됩니다.

| 페이지 | 안내 메시지 |
|--------|------------|
| 홈 | "시각장애인 학습 앱, 점글이입니다. 메인화면에 점자학습, 정보탐색, 복습하기, 자유변환 모드가 있습니다. 모드를 선택해주세요." |
| 학습 메뉴 | "점자 학습 메뉴입니다. 자모, 단어, 문장, 자유 변환 중에서 선택하세요." |
| 정보 탐색 | "정보 탐색 모드입니다. 궁금한 것을 물어보세요. 뉴스나 날씨 정보도 확인할 수 있습니다." |
| 복습 | "복습 모드입니다. 이전에 틀린 문제들을 다시 복습해보세요." |

### 4.2 상태 안내

주요 상태 변경 시 TTS 피드백이 제공됩니다.

- 디바이스 연결: "점자 디바이스가 연결되었습니다."
- 디바이스 해제: "점자 디바이스 연결이 해제되었습니다."
- 점자 출력 시작: "점자 출력을 시작합니다."
- 점자 출력 완료: "점자 출력이 완료되었습니다."
- 복습 항목 저장: "키워드 N개가 복습 목록에 추가되었습니다."

---

## 5. 접근성 요소

### 5.1 ARIA 레이블

모든 인터랙티브 요소에 ARIA 레이블이 제공됩니다.

```tsx
<button
  aria-label="점자 디바이스 연결"
  aria-pressed={isConnected}
>
  🔌 디바이스 연결
</button>
```

### 5.2 키보드 네비게이션

- Tab: 다음 요소로 이동
- Shift+Tab: 이전 요소로 이동
- Enter: 버튼 클릭
- Escape: 모달 닫기

### 5.3 스크린 리더 지원

- 모든 텍스트는 스크린 리더로 읽을 수 있음
- 이미지는 `aria-label` 또는 `alt` 속성 제공
- 상태 변경은 `aria-live` 영역에 알림

---

## 6. 점자 출력 위치

### 6.1 점자 패턴 표시

**시각적 표시**
- 2×3 그리드 레이아웃
- 켜진 점: 파란색 원 (bg-primary)
- 꺼진 점: 회색 원 (bg-card)
- 각 점 크기: 16px × 16px

**구현**
```tsx
function CellView({ c }: { c: Cell }) {
  const [a, b, c2, d, e, f] = c || [0, 0, 0, 0, 0, 0];
  return (
    <div className="inline-flex flex-col px-3 py-2 rounded-xl border">
      <div className="flex"><Dot on={!!a} /><Dot on={!!d} /></div>
      <div className="flex"><Dot on={!!b} /><Dot on={!!e} /></div>
      <div className="flex"><Dot on={!!c2} /><Dot on={!!f} /></div>
    </div>
  );
}
```

### 6.2 BrailleOutputPanel

**파일**: `frontend/src/components/braille/BrailleOutputPanel.tsx`

**위치**: 정보 탐색 페이지 상단 (Sticky)

**표시 내용**
- 현재 출력 중인 키워드 목록
- 출력 진행 상태

**레이아웃**
```
┌─────────────────────────────┐
│  점자 출력                   │
│  현재: 키워드1, 키워드2, ... │
└─────────────────────────────┘
```

---

## 부록

### A. 색상 팔레트

**Tailwind CSS 토큰 사용**

- Primary: 파란색 계열
- Success: 초록색 계열
- Accent: 보라색 계열
- Sky: 하늘색 계열
- Danger: 빨간색 계열

### B. 폰트 크기

- 제목: `text-lg` (18px)
- 본문: `text-base` (16px)
- 작은 텍스트: `text-sm` (14px)
- 매우 작은 텍스트: `text-xs` (12px)

### C. 간격

- 카드 간격: `space-y-4` (16px)
- 섹션 간격: `my-6` (24px)
- 패딩: `px-4 py-2` (16px × 8px)
